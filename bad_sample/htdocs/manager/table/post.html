<?
	# 패스 및 클래스
	include $_SERVER[DOCUMENT_ROOT]."/Root_Path.inc";
	include "variable_config.inc";

	# DB 접속 및 함수
	include "logon.inc";
	include "user_function.inc";

	# 변수 및 설정
	include "config.inc";
	include "t_config.inc";

	# 입력값에 대한 타당성 검사
//	include "t_checkvalid.inc";

	# ------------------------------------------------------- #
	#	입력값 정리 시작
	# ------------------------------------------------------- #
	// 코드
	$query = "SELECT MAX(CD) FROM $cf_table_pgm_nm WHERE GB = '$fr_gb'";
	$my_cd = $DB->Value($query) + 1;

	// 아이템
	$tm_item = $fr_item ? $fr_item : 0;

	// 답변여부
	$fr_reply_yn = ($fr_reply_yn == "Y") ? "Y" : "N";

	// 이메일 전송여부
	$fr_notify_email_yn = ($fr_notify_email_yn == "Y") ? "Y" : "N";

	// HTML 허용여부
	$fr_allow_html_yn = ($fr_allow_html_yn == "Y") ? "Y" : "N";

	// 비밀글 허용여부
	$fr_secret_yn = ($fr_secret_yn == "Y") ? "Y" : "N";

	// 여러글 읽기 여부
	$fr_multy_read_yn = ($fr_multy_read_yn == "Y") ? "Y" : "N";

	// 답변글 삭제가능 여부
	$fr_allow_delete_thread_yn = ($fr_allow_delete_thread_yn == "Y") ? "Y" : "N";

	// 수정화면 미리보기 여부
	$fr_modify_review_yn = ($fr_modify_review_yn == "Y") ? "Y" : "N";

	// 공지글 사용여부
	$fr_annou_yn = ($fr_annou_yn == "Y") ? "Y" : "N";

	// 코멘트글 사용여부
	$fr_comment_yn = ($fr_comment_yn == "Y") ? "Y" : "N";

	// 추천 가능여부
	$fr_recomm_yn = ($fr_recomm_yn == "Y") ? "Y" : "N";

	// 팝업창 가능여부
	$fr_popup_yn = ($fr_popup_yn == "Y") ? "Y" : "N";

    // 작성자관련정보 설정
    $signdate = time();
    $tm_input_id = $_COOKIE[ID] ? $_COOKIE[ID] : "";
    $tm_input_nm = $_COOKIE[NICK_NM] ? $_COOKIE[NICK_NM] : $_COOKIE[NM];
    $tm_input_ip = $_SERVER[REMOTE_ADDR];
    $tm_input_ymdhms = date("YmdHis", $signdate);
    $tm_sign_id = $tm_input_id;
    $tm_sign_nm = $tm_input_nm;
    $tm_sign_ip = $tm_input_ip;
    $tm_sign_ymdhms = $tm_input_ymdhms;
	# ------------------------------------------------------- #
	#	입력값 정리 끝
	# ------------------------------------------------------- #

	# 여러글 읽기 여부
	# 입력쿼리
    $query = "INSERT INTO $cf_table_pgm_nm (" .
					"GB, " .
					"CD, " .
					"ITEM, " .
					"ITEM_NM, " .
					"TITLE_NM, " .
					"TABLE_NM, " .
//					"CO_TABLE_NM, " .
					"PATH_URL, " .
					"POST_LEVEL, " .
					"READ_LEVEL, " .
					"BODY_LEVEL, " .
					"REPLY_LEVEL, " .
					"MODIFY_LEVEL, " .
					"DELETE_LEVEL, " .
					"REPLY_YN, " .
					"REPLY_INDENT, " .
					"ADMIN_ID, " .
					"ADMIN_EMAIL, " .
					"TEL_NO, " .
					"NOTIFY_EMAIL_YN, " .
					"EMAIL_ID1, " .
					"EMAIL_ID2, " .
					"EMAIL_ID3, " .
					"NUM_PER_PAGE, " .
					"PAGE_PER_BLOCK, " .
					"ALLOW_HTML_YN, " .
					"SECRET_YN, " .
					"ALLOW_DELETE_THREAD_YN, " .
					"NOTIFY_NEW_ARTICLE, " .
					"MULTY_READ_YN, " .
					"SAVEDIR, " .
					"ATTACH_SIZE, " .
					"TABLE_WD_LARGE, " .
					"TABLE_WD_SMALL, " .
					"TABLE_WD_SPACE, " .
					"MODIFY_REVIEW_YN, " .
					"IMAGES_DIR, " .
					"CSS_DIR, " .
					"TITLE_IMAGES, " .
					"TITLE_ANNOU, " .
					"META_TITLE, " .
					"META_KEYWD, " .
					"META_DESC, " .
					"ANNOU_YN, " .
					"COMMENT_YN, " .
					"RECOMM_YN, " .
					"POPUP_YN, " .
					"SKIN_NM, " .
					"BOARD_CD, " .
					"SEARCH_CD, " .
					"TITLE_DESC, " .
					"INPUT_ID, " .
					"INPUT_NM, " .
					"INPUT_IP, " .
					"INPUT_YMDHMS, " .
					"SIGN_ID, " .
					"SIGN_NM, " .
					"SIGN_IP, " .
					"SIGN_YMDHMS" .

				") VALUES (" .

					"'$fr_gb', " .
					"'$my_cd', " .
					"'$tm_item', " .
					"'$fr_item_nm', " .
					"'$fr_title_nm', " .
					"'$fr_table_nm', " .
//					"'$fr_co_table_nm', " .
					"'$fr_path_url', " .
					"'$fr_post_level', " .
					"'$fr_read_level', " .
					"'$fr_body_level', " .
					"'$fr_reply_level', " .
					"'$fr_modify_level', " .
					"'$fr_delete_level', " .
					"'$fr_reply_yn', " .
					"'$fr_reply_indent', " .
					"'$fr_admin_id', " .
					"'$fr_admin_email', " .
					"'$fr_tel_no', " .
					"'$fr_notify_email_yn', " .
					"'$fr_email_id1', " .
					"'$fr_email_id2', " .
					"'$fr_email_id3', " .
					"'$fr_num_per_page', " .
					"'$fr_page_per_block', " .
					"'$fr_allow_html_yn', " .
					"'$fr_secret_yn', " .
					"'$fr_allow_delete_thread_yn', " .
					"'$fr_notify_new_article', " .
					"'$fr_multy_read_yn', " .
					"'$fr_savedir', " .
					"'$fr_attach_size', " .
					"'$fr_table_wd_large', " .
					"'$fr_table_wd_small', " .
					"'$fr_table_wd_space', " .
					"'$fr_modify_review_yn', " .
					"'$fr_images_dir', " .
					"'$fr_css_dir', " .
					"'$fr_title_images', " .
					"'$fr_title_annou', " .
					"'$fr_meta_title', " .
					"'$fr_meta_keywd', " .
					"'$fr_meta_desc', " .
					"'$fr_annou_yn', " .
					"'$fr_comment_yn', " .
					"'$fr_recomm_yn', " .
					"'$fr_popup_yn', " .
					"'$fr_skin_nm', " .
					"'$fr_board_cd', " .
					"'$fr_search_cd', " .
					"'$fr_title_desc', " .
					"'$tm_input_id', " .
					"'$tm_input_nm', " .
					"'$tm_input_ip', " .
					"'$tm_input_ymdhms', " .
					"'$tm_sign_id', " .
					"'$tm_sign_nm', " .
					"'$tm_sign_ip', " .
					"'$tm_sign_ymdhms'" .
				");";
	$DB->Insert_Query($query);

	error_msg("", "list.html?$po_basic_query");

	# DB 접속종료
	include "logoff.inc";
?>
