<?
	# 패스 및 클래스
	include $_SERVER[DOCUMENT_ROOT]."/Root_Path.inc";
	include "variable_config.inc";

	# DB 접속 및 함수
	include "logon.inc";
	include "user_function.inc";

	# 변수 및 설정
	include "config.inc";
	include "t_config.inc";

	# 입력값에 대한 타당성 검사
	include "t_checkvalid.inc";

	# 코드 중복여부 체크
	$query = "SELECT COUNT(*) FROM $cf_table_cod_nm WHERE GB='$po_gb' and CD = '$fr_cd'";

	if($DB->Value($query))
		error_msg("입력하신 코드는 이미 존재 합니다.\\n\\n 다시 입력하여 주십시오.", "back");


	# 입력값
	$fr_nm_desc = escape_string($fr_nm_desc);
	$fr_bigo = escape_string($fr_bigo);
	
    // 작성자관련정보 설정
    $signdate = time();
    $tm_input_id = $_COOKIE[ID] ? $_COOKIE[ID] : "";
    $tm_input_nm = $_COOKIE[NICK_NM] ? $_COOKIE[NICK_NM] : $_COOKIE[NM];
    $tm_input_ip = $_SERVER[REMOTE_ADDR];
    $tm_input_ymdhms = date("YmdHis", $signdate);
    $tm_sign_id = $tm_input_id;
    $tm_sign_nm = $tm_input_nm;
    $tm_sign_ip = $tm_input_ip;
    $tm_sign_ymdhms = $tm_input_ymdhms;

	# 입력쿼리
    $query = "INSERT INTO $cf_table_cod_nm (" .
					"GB, " .
					"CD, " .
					"NM, " .
					"CON_CD, " .
					"NM_DESC, " .
					"ENM, " .
					"BIGO, " .
					"INPUT_ID, " .
					"INPUT_NM, " .
					"INPUT_IP, " .
					"INPUT_YMDHMS, " .
					"SIGN_ID, " .
					"SIGN_NM, " .
					"SIGN_IP, " .
					"SIGN_YMDHMS" .

				") VALUES (" .

					"'$po_gb', " .
					"'$fr_cd', " .
					"'$fr_nm', " .
					"'$fr_con_cd', " .
					"'$fr_nm_desc', " .
					"'$fr_enm', " .
					"'$fr_bigo', " .
					"'$tm_input_id', " .
					"'$tm_input_nm', " .
					"'$tm_input_ip', " .
					"'$tm_input_ymdhms', " .
					"'$tm_sign_id', " .
					"'$tm_sign_nm', " .
					"'$tm_sign_ip', " .
					"'$tm_sign_ymdhms'" .
				");";


	$DB->Insert_Query($query);

	error_msg("", "list.html?$po_basic_query&po_gb=$po_gb&page=$page");

	# DB 접속종료
	include "logoff.inc";
?>
